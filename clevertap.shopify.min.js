var clevertapShopify=function(){"use strict";var e=0;function t(t){return"__private_"+e+++"_"+t}function o(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}const i="clevertap-prod.com",r="https:";var a=t("mode"),s=t("browser");const n=new class{constructor(){Object.defineProperty(this,a,{writable:!0,value:void 0}),Object.defineProperty(this,s,{writable:!0,value:void 0})}set mode(e){o(this,a)[a]=e}get mode(){return o(this,a)[a]}set browser(e){o(this,s)[s]=e}get browser(){return o(this,s)[s]}};var c=t("accountId"),l=t("region"),h=t("targetDomain"),d=t("dcSdkversion");class u{constructor(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:""}),Object.defineProperty(this,h,{writable:!0,value:i}),Object.defineProperty(this,d,{writable:!0,value:""}),this.id=e,t&&(this.region=t),o&&(this.targetDomain=o)}get id(){return o(this,c)[c]}set id(e){o(this,c)[c]=e}get region(){return o(this,l)[l]}set region(e){o(this,l)[l]=e}get dcSDKVersion(){return o(this,d)[d]}set dcSDKVersion(e){o(this,d)[d]=e}get targetDomain(){return o(this,h)[h]}set targetDomain(e){o(this,h)[h]=e}get finalTargetDomain(){return this.region?"".concat(this.region,".").concat(this.targetDomain):this.targetDomain===i?"".concat("eu1",".").concat(this.targetDomain):this.targetDomain}get endpoint(){return"SHOPIFY"===n.mode?"/shopify":"/a"}get dataPostURL(){return"".concat(r,"//").concat(this.finalTargetDomain,"/").concat(this.endpoint,"?t=96")}get recorderURL(){return"".concat(r,"//").concat(this.finalTargetDomain,"/r?r=1")}get emailURL(){return"".concat(r,"//").concat(this.finalTargetDomain,"/e?r=1")}}const g=new RegExp("^\\s+|\\.|:|\\$|'|\"|\\\\|\\s+$","g"),p=new RegExp("^\\s+|'|\"|\\\\|\\s+$","g"),f=new RegExp("'","g"),v="clear",w="Charged ID",b="WZRK_CHARGED_ID",y="WZRK_G",m="WZRK_K",k="WZRK_CAMP",S="WZRK_EV",O="WZRK_META",P="WZRK_PR",C="WZRK_ARP",R="WZRK_L",L="useIP",A="WZRK_X",j="push",D=31536e3,E="WZRK_FPU",_=["Stayed","UTM Visited","App Launched","Notification Sent","Notification Viewed","Notification Clicked"],N=e=>"string"==typeof e||e instanceof String,T=e=>"[object Object]"===Object.prototype.toString.call(e),M=e=>"object"==typeof e&&e instanceof Date,I=e=>{for(const t in e)if(e.hasOwnProperty(t))return!1;return!0},U=e=>!isNaN(parseFloat(e))&&isFinite(e),q=e=>null!=e&&"undefined"!==e,F=(e,t)=>{if("object"!=typeof e){let o;return N(e)?(o=B(e,p),o.length>1024&&(o=o.substring(0,1024),t.reportError(521,o+"... length exceeded 1024 chars. Trimmed."))):o=e,o}for(const o in e)if(e.hasOwnProperty(o)){const i=F(e[o],t);let r;r=B(o,g),r.length>1024&&(r=r.substring(0,1024),t.reportError(520,r+"... length exceeded 1024 chars. Trimmed.")),delete e[o],e[r]=i}return e},B=(e,t)=>e.replace(t,"");const G=(e,t,o)=>e+"&"+t+"="+encodeURIComponent(o),W=()=>"SHOPIFY"===n.mode?n.browser.document.location.hostname:window.location.hostname;class K extends class{static async saveAsync(e,t){if(!e||!t)return!1;try{return await n.browser.localStorage.setItem(e,"string"==typeof t?t:JSON.stringify(t)),!0}catch(e){return!1}}static async readAsync(e){if(!e)return!1;let t;try{t=await n.browser.localStorage.getItem(e),t=JSON.parse(t)}catch(e){t=null}return t}static async removeAsync(e){if(!e)return!1;try{return await n.browser.localStorage.removeItem(e),!0}catch(e){return!1}}static async createCookieAsync(e,t,o,i){let r="",a="";if(o){const e=new Date;e.setTime(e.getTime()+1e3*o),r="; expires="+e.toGMTString()}i&&(a="; domain="+i),t=encodeURIComponent(t);try{return await n.browser.cookie.set(e,t+r+a+"; path=/"),!0}catch(e){return!1}}static async readCookieAsync(e){let t;try{t=await n.browser.cookie.get(e)}catch(e){t=null}return""===t?null:t}static async removeCookieAsync(e,t){let o=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;";t&&(o=o+" domain="+t+"; path=/");try{return await n.browser.cookie.set(o),!0}catch(e){return!1}}}{static save(e,t){return!(!e||!t)&&(this._isLocalStorageSupported()?(localStorage.setItem(e,"string"==typeof t?t:JSON.stringify(t)),!0):void 0)}static read(e){if(!e)return!1;let t=null;if(this._isLocalStorageSupported()&&(t=localStorage.getItem(e)),null!=t)try{t=JSON.parse(t)}catch(e){}return t}static remove(e){return!!e&&(this._isLocalStorageSupported()?(localStorage.removeItem(e),!0):void 0)}static removeCookie(e,t){let o=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;";t&&(o=o+" domain="+t+"; path=/"),document.cookie=o}static createCookie(e,t,o,i){let r="",a="";if(o){const e=new Date;e.setTime(e.getTime()+1e3*o),r="; expires="+e.toGMTString()}i&&(a="; domain="+i),t=encodeURIComponent(t),document.cookie=e+"="+t+r+a+"; path=/"}static readCookie(e){const t=e+"=",o=document.cookie.split(";");for(let e=0;e<o.length;e++){let i=o[e];for(;" "===i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}return null}static _isLocalStorageSupported(){return"SHOPIFY"===n.mode||"localStorage"in window&&null!==window.localStorage&&"function"==typeof window.localStorage.setItem}static async saveToLSorCookie(e,t){if(null!=t)try{this._isLocalStorageSupported()?await this.addData("localStorage",e,encodeURIComponent(JSON.stringify(t))):e===y?await this.addData("cookie",e,encodeURIComponent(t),0,W()):await this.addData("cookie",e,encodeURIComponent(JSON.stringify(t)),0,W()),J.globalCache[e]=t}catch(e){}}static async readFromLSorCookie(e){let t;if(J.globalCache.hasOwnProperty(e))return J.globalCache[e];if(t=this._isLocalStorageSupported()?await this.retrieveData("localStorage",e):await this.retrieveData("cookie",e),null!=t&&("function"!=typeof t.trim||""!==t.trim())){let o;try{o=JSON.parse(decodeURIComponent(t))}catch(e){o=decodeURIComponent(t)}return J.globalCache[e]=o,o}}static async createBroadCookie(e,t,o,i){if(i){let a=J.broadDomain;if(null==a){const s=i.split(".");let n="";for(let i=s.length-1;i>=0;i--){if(n=0===i?s[i]+n:"."+s[i]+n,await this.retrieveData("cookie",e)){var r="test_"+e+i;if(await this.addData("cookie",r,t,10,n),await!this.retrieveData("cookie",r))continue;await this.deleteData("cookie",r,n)}await this.addData("cookie",e,t,o,n);if(await this.retrieveData("cookie",e)==t){a=n,J.broadDomain=a;break}}}else await this.addData("cookie",e,t,o,a)}else await this.addData("cookie",e,t,o,i)}static async getMetaProp(e){const t=await this.readFromLSorCookie(O);if(null!=t)return t[e]}static async setMetaProp(e,t){if(this._isLocalStorageSupported()){let o=await this.readFromLSorCookie(O);null==o&&(o={}),void 0===t?delete o[e]:o[e]=t,await this.saveToLSorCookie(O,o)}}static async getAndClearMetaProp(e){const t=await this.getMetaProp(e);return await this.setMetaProp(e,void 0),t}static async setInstantDeleteFlagInK(){let e=await this.readFromLSorCookie(m);null==e&&(e={}),e.flag=!0,await this.saveToLSorCookie(m,e)}static async backupEvent(e,t,o){let i=await this.readFromLSorCookie(R);void 0===i&&(i={}),i[t]={q:e},await this.saveToLSorCookie(R,i),o.debug("stored in ".concat(R," reqNo : ").concat(t," -> ").concat(e))}static async removeBackup(e,t){const o=await this.readFromLSorCookie(R);null!=o&&void 0!==o[e]&&(t.debug("del event: ".concat(e," data-> ").concat(o[e].q)),delete o[e],await this.saveToLSorCookie(R,o))}static async retrieveData(e,t){let o;switch(e){case"cookie":o="WEB"===n.mode?this.readCookie(t):await this.readCookieAsync(t);break;case"localStorage":o="WEB"===n.mode?this.read(t):await this.readAsync(t)}return o}static async addData(e,t,o,i,r){switch(e){case"cookie":"WEB"===n.mode?this.createCookie(t,o,i,r):await this.readCookieAsync(t,o,i,r);break;case"localStorage":"WEB"===n.mode?this.save(t,o):await this.saveAsync(t,o)}}static async deleteData(e,t,o){switch(e){case"cookie":"WEB"===n.mode?this.removeCookie(t):await this.removeCookieAsync(t,o);break;case"localStorage":"WEB"===n.mode?this.remove(t):await this.removeAsync(t)}}}const J={globalCache:{gcookie:null,REQ_N:0,RESP_N:0},LRU_CACHE:null,globalProfileMap:void 0,globalEventsMap:void 0,blockRequest:!1,isOptInRequest:!1,broadDomain:null,webPushEnabled:null,campaignDivMap:{},currentSessionId:null,wiz_counter:0,notifApi:{notifEnabledFromApi:!1},unsubGroups:[],updatedCategoryLong:null,inbox:null,isPrivacyArrPushed:!1,privacyArray:[],offline:!1,location:null,dismissSpamControl:!1,globalUnsubscribe:!0,flutterVersion:null};var x=t("logger");class H{constructor(e){let{logger:t}=e;Object.defineProperty(this,x,{writable:!0,value:void 0}),this.gcookie=void 0,o(this,x)[x]=t}async getGuid(){let e=null;if(q(this.gcookie))return this.gcookie;if(K._isLocalStorageSupported()){const t=await K.retrieveData("localStorage",y);if(q(t)){try{e=JSON.parse(decodeURIComponent(t))}catch(i){o(this,x)[x].debug("Cannot parse Gcookie from localstorage - must be encoded "+t),32===t.length?(e=t,await K.saveToLSorCookie(y,t)):o(this,x)[x].error("Illegal guid "+t)}q(e)&&await K.createBroadCookie(y,e,D,W())}}return q(e)||(e=await K.retrieveData("cookie",y),!q(e)||0!==e.indexOf("%")&&0!==e.indexOf("'")&&0!==e.indexOf('"')||(e=null),q(e)&&await K.saveToLSorCookie(y,e)),e}}const z=()=>Math.floor((new Date).getTime()/1e3),Z=e=>"$D_"+Math.round(e.getTime()/1e3),$=e=>{if(Y(e))return"$D_"+e},Y=e=>{const t=/^(\d{4})(\d{2})(\d{2})$/.exec(e);if(null==t)return!1;const o=t[3],i=t[2]-1,r=t[1],a=new Date(r,i,o);return a.getDate()==o&&a.getMonth()==i&&a.getFullYear()==r};var V=t("logger"),Q=t("sessionId"),X=t("isPersonalisationActive");class ee{constructor(e){let{logger:t,isPersonalisationActive:i}=e;Object.defineProperty(this,V,{writable:!0,value:void 0}),Object.defineProperty(this,Q,{writable:!0,value:void 0}),Object.defineProperty(this,X,{writable:!0,value:void 0}),this.cookieName=void 0,this.scookieObj=void 0,this.sessionId=K.getMetaProp("cs"),o(this,V)[V]=t,o(this,X)[X]=i}get sessionId(){return o(this,Q)[Q]}set sessionId(e){o(this,Q)[Q]=e}async getSessionCookieObject(){let e=await K.retrieveData("cookie",this.cookieName),t={};if(null!=e)if(e=e.replace(f,'"'),t=JSON.parse(e),T(t)){if(void 0!==t.t){const e=t.t;z()-e>1260&&(t={})}}else t={};return this.scookieObj=t,t}async setSessionCookieObject(e){const t=JSON.stringify(e);await K.createBroadCookie(this.cookieName,t,1200,W())}manageSession(e){if(void 0===this.sessionId||this.sessionId!==e){const t=K.getMetaProp("cs");if(void 0===t)K.setMetaProp("ps",e),K.setMetaProp("cs",e),K.setMetaProp("sc",1);else if(t!==e){K.setMetaProp("ps",t),K.setMetaProp("cs",e);let o=K.getMetaProp("sc");void 0===o&&(o=0),K.setMetaProp("sc",o+1)}this.sessionId=e}}getTimeElapsed(){if(!o(this,X)[X]())return;null!=this.scookieObj&&(this.scookieObj=this.getSessionCookieObject());const e=this.scookieObj.s;if(null!=e){const t=z();return Math.floor(t-e)}}getPageCount(){if(o(this,X)[X]())return null!=this.scookieObj&&(this.scookieObj=this.getSessionCookieObject()),this.scookieObj.p}}const te=(e,t)=>(t&&"function"==typeof t.debug&&t.debug("dobj:"+e),ie(e)),oe=(()=>{let e="",t=0;for(t=0;t<=25;t++)e+=String.fromCharCode(t+65);for(t=0;t<=25;t++)e+=String.fromCharCode(t+97);for(t=0;t<10;t++)e+=t;return e+"+/="})(),ie=e=>{if(null==e)return"";var t,o,i,r,a,s,n,c="",l=0;for(e=(e=>{if(null==e)return"";let t,o,i,r={},a={},s="",n="",c="",l=2,h=3,d=2,u="",g=0,p=0,f=String.fromCharCode;for(i=0;i<e.length;i+=1)if(s=e.charAt(i),Object.prototype.hasOwnProperty.call(r,s)||(r[s]=h++,a[s]=!0),n=c+s,Object.prototype.hasOwnProperty.call(r,n))c=n;else{if(Object.prototype.hasOwnProperty.call(a,c)){if(c.charCodeAt(0)<256){for(t=0;t<d;t++)g<<=1,15==p?(p=0,u+=f(g),g=0):p++;for(o=c.charCodeAt(0),t=0;t<8;t++)g=g<<1|1&o,15==p?(p=0,u+=f(g),g=0):p++,o>>=1}else{for(o=1,t=0;t<d;t++)g=g<<1|o,15==p?(p=0,u+=f(g),g=0):p++,o=0;for(o=c.charCodeAt(0),t=0;t<16;t++)g=g<<1|1&o,15==p?(p=0,u+=f(g),g=0):p++,o>>=1}l--,0==l&&(l=Math.pow(2,d),d++),delete a[c]}else for(o=r[c],t=0;t<d;t++)g=g<<1|1&o,15==p?(p=0,u+=f(g),g=0):p++,o>>=1;l--,0==l&&(l=Math.pow(2,d),d++),r[n]=h++,c=String(s)}if(""!==c){if(Object.prototype.hasOwnProperty.call(a,c)){if(c.charCodeAt(0)<256){for(t=0;t<d;t++)g<<=1,15==p?(p=0,u+=f(g),g=0):p++;for(o=c.charCodeAt(0),t=0;t<8;t++)g=g<<1|1&o,15==p?(p=0,u+=f(g),g=0):p++,o>>=1}else{for(o=1,t=0;t<d;t++)g=g<<1|o,15==p?(p=0,u+=f(g),g=0):p++,o=0;for(o=c.charCodeAt(0),t=0;t<16;t++)g=g<<1|1&o,15==p?(p=0,u+=f(g),g=0):p++,o>>=1}l--,0==l&&(l=Math.pow(2,d),d++),delete a[c]}else for(o=r[c],t=0;t<d;t++)g=g<<1|1&o,15==p?(p=0,u+=f(g),g=0):p++,o>>=1;l--,0==l&&(l=Math.pow(2,d),d++)}for(o=2,t=0;t<d;t++)g=g<<1|1&o,15==p?(p=0,u+=f(g),g=0):p++,o>>=1;for(;;){if(g<<=1,15==p){u+=f(g);break}p++}return u})(e);l<2*e.length;)l%2==0?(t=e.charCodeAt(l/2)>>8,o=255&e.charCodeAt(l/2),i=l/2+1<e.length?e.charCodeAt(l/2+1)>>8:NaN):(t=255&e.charCodeAt((l-1)/2),(l+1)/2<e.length?(o=e.charCodeAt((l+1)/2)>>8,i=255&e.charCodeAt((l+1)/2)):o=i=NaN),l+=3,r=t>>2,a=(3&t)<<4|o>>4,s=(15&o)<<2|i>>6,n=63&i,isNaN(o)?s=n=64:isNaN(i)&&(n=64),c=c+oe.charAt(r)+oe.charAt(a)+oe.charAt(s)+oe.charAt(n);return c};var re=t("keyOrder"),ae=t("deleteFromObject");class se{constructor(e){Object.defineProperty(this,ae,{value:ne}),Object.defineProperty(this,re,{writable:!0,value:void 0}),this.max=e;let t=K.readFromLSorCookie(A);if(t){const e={};o(this,re)[re]=[],t=t.cache;for(const i in t)t.hasOwnProperty(i)&&(e[t[i][0]]=t[i][1],o(this,re)[re].push(t[i][0]));this.cache=e}else this.cache={},o(this,re)[re]=[]}get(e){const t=this.cache[e];return t&&(this.cache=o(this,ae)[ae](e,this.cache),this.cache[e]=t,o(this,re)[re].push(e)),this.saveCacheToLS(this.cache),t}set(e,t){const i=this.cache[e],r=o(this,re)[re];null!=i?this.cache=o(this,ae)[ae](e,this.cache):r.length===this.max&&(this.cache=o(this,ae)[ae](r[0],this.cache)),this.cache[e]=t,o(this,re)[re][o(this,re)[re]-1]!==e&&o(this,re)[re].push(e),this.saveCacheToLS(this.cache)}saveCacheToLS(e){const t=[],i=o(this,re)[re];for(const o in i)if(i.hasOwnProperty(o)){const r=[];r.push(i[o]),r.push(e[i[o]]),t.push(r)}K.saveToLSorCookie(A,{cache:t})}getKey(e){if(null===e)return null;const t=o(this,re)[re];for(const o in t)if(t.hasOwnProperty(o)&&this.cache[t[o]]===e)return t[o];return null}getSecondLastKey(){const e=o(this,re)[re];return null!=e&&e.length>1?e[e.length-2]:-1}getLastKey(){const e=o(this,re)[re].length;if(e)return o(this,re)[re][e-1]}}var ne=function(e,t){const i=JSON.parse(JSON.stringify(o(this,re)[re])),r={};let a;for(const o in i)i.hasOwnProperty(o)&&(i[o]!==e?r[i[o]]=t[i[o]]:a=o);return i.splice(a,1),o(this,re)[re]=JSON.parse(JSON.stringify(i)),r},ce=t("isOULInProgress"),le=t("oulReqN");const he=new class{constructor(){Object.defineProperty(this,ce,{writable:!0,value:void 0}),Object.defineProperty(this,le,{writable:!0,value:void 0})}get isOULInProgress(){return"WEB"===n.mode?window.isOULInProgress:o(this,ce)[ce]}set isOULInProgress(e){"WEB"!==n.mode?o(this,ce)[ce]=e:window.isOULInProgress=e}get oulReqN(){return"WEB"===n.mode?window.oulReqN:o(this,le)[le]}set oulReqN(e){"WEB"!==n.mode?o(this,le)[le]=e:window.oulReqN=e}};var de=t("logger"),ue=t("request"),ge=t("device"),pe=t("session");const fe=new class{constructor(e){Object.defineProperty(this,de,{writable:!0,value:void 0}),Object.defineProperty(this,ue,{writable:!0,value:void 0}),Object.defineProperty(this,ge,{writable:!0,value:void 0}),Object.defineProperty(this,pe,{writable:!0,value:void 0}),this.setPrivateProperties(e)}setPrivateProperties(e){let{logger:t,request:i,device:r,session:a}=e;o(this,de)[de]=t,o(this,ue)[ue]=i,o(this,ge)[ge]=r,o(this,pe)[pe]=a}async s(e,t,i,r,a){let s=!1,n=!1;if(he.isOULInProgress&&(i||"undefined"!==r&&r===he.oulReqN)&&(he.isOULInProgress=!1,s=!0),void 0===r&&(r=0),await K.removeBackup(r,o(this,de)[de]),r>J.globalCache.REQ_N)return;if(q(o(this,ge)[ge].gcookie)||e&&(n=!0),!q(o(this,ge)[ge].gcookie)||i||"boolean"==typeof a){const r=o(this,pe)[pe].getSessionCookieObject();if(he.isOULInProgress||r.s&&t<r.s)return;if(o(this,de)[de].debug("Cookie was ".concat(o(this,ge)[ge].gcookie," set to ").concat(e)),o(this,ge)[ge].gcookie=e,q(o(this,ge)[ge].gcookie)||await K.getAndClearMetaProp(L),e&&K._isLocalStorageSupported()){null==J.LRU_CACHE&&(J.LRU_CACHE=new se(100));const t=await K.readFromLSorCookie(m);let r;null!=t&&t.id&&(r=J.LRU_CACHE.cache[t.id],i&&(r||(await K.saveToLSorCookie(E,!0),J.LRU_CACHE.set(t.id,e)))),await K.saveToLSorCookie(y,e);const a=J.LRU_CACHE.getSecondLastKey();if(await K.readFromLSorCookie(E)&&-1!==a){const e=J.LRU_CACHE.cache[a];o(this,ue)[ue].unregisterTokenForGuid(e)}}await K.createBroadCookie(y,e,D,window.location.hostname),await K.saveToLSorCookie(y,e)}K._isLocalStorageSupported()&&o(this,pe)[pe].manageSession(t);const c=o(this,pe)[pe].getSessionCookieObject();(void 0===c.s||c.s<=t)&&(c.s=t,c.t=z(),o(this,pe)[pe].setSessionCookieObject(c)),q(o(this,ge)[ge].gcookie)&&(J.blockRequest=!1),!s&&!n||o(this,ue)[ue].processingBackup||o(this,ue)[ue].processBackupEvents(),J.globalCache.RESP_N=r}}({logger:"",request:"",device:"",session:""}),ve="This property has been ignored.",we="CleverTap error:",be="".concat(we," Event structure not valid. ").concat(ve),ye="".concat(we," Gender value should be either M or F. ").concat(ve),me="".concat(we," Employed value should be either Y or N. ").concat(ve),ke="".concat(we," Married value should be either Y or N. ").concat(ve),Se="".concat(we," Education value should be either School, College or Graduate. ").concat(ve),Oe="".concat(we," Age value should be a number. ").concat(ve),Pe="".concat(we," DOB value should be a Date Object"),Ce="".concat(we," Phone number should be formatted as +[country code][number]"),Re=()=>{const e=JSON.parse(decodeURIComponent(K.read(y)));let t={};if(K._isLocalStorageSupported()){let o={};t=(()=>{let e={};if(K._isLocalStorageSupported()){let t=K.read(k);null!=t?(t=JSON.parse(decodeURIComponent(t).replace(f,'"')),t.hasOwnProperty("global")?e.wp=t:e=t):e={}}return e})();const i=K.read("WZRK_CAMP_G"),r=i?decodeURIComponent(i):null,a=r?JSON.parse(r):null,s=e&&null!=i&&a&&a[e]&&a[e].wp?Object.values(a[e].wp):[],n=e&&null!=i&&a&&a[e]&&a[e].wi?Object.values(a[e].wi):[],c=(()=>{const e=new Date;return e.getFullYear()+""+e.getMonth()+e.getDay()})();let l=0,h=0;return t.wp&&t.wp[c]&&"undefined"!==t.wp[c].tc&&(l=t.wp[c].tc),t.wi&&t.wi[c]&&"undefined"!==t.wi[c].tc&&(h=t.wi[c].tc),o={wmp:l,wimp:h,tlc:s,witlc:n},o}},Le=(e,t)=>{let{logger:o}=t,i=!1;if(T(e))for(const t in e)if(e.hasOwnProperty(t)){i=!0;let r=e[t];if(null==r){delete e[t];continue}"Gender"!==t||r.match(/^M$|^F$/)||(i=!1,o.error(ye)),"Employed"!==t||r.match(/^Y$|^N$/)||(i=!1,o.error(me)),"Married"!==t||r.match(/^Y$|^N$/)||(i=!1,o.error(ke)),"Education"!==t||r.match(/^School$|^College$|^Graduate$/)||(i=!1,o.error(Se)),"Age"===t&&null!=r&&(U(r)?e.Age=+r:(i=!1,o.error(Oe))),"DOB"===t?(/^\$D_/.test(r)&&11===(r+"").length||M(r)||(i=!1,o.error(Pe)),M(r)&&(e[t]=Z(r))):M(r)&&(e[t]=Z(r)),"Phone"!==t||I(r)||(r.length>8&&"+"===r.charAt(0)?(r=r.substring(1,r.length),U(r)?e.Phone=+r:(i=!1,o.error(Ce+". Removed."))):(i=!1,o.error(Ce+". Removed."))),i||delete e[t]}return i},Ae=e=>{const t={};t.Name=e.name,null!=e.id&&(t.FBID=e.id+""),"male"===e.gender?t.Gender="M":"female"===e.gender?t.Gender="F":t.Gender="O";null!=e.relationship_status&&(t.Married="N","Married"===e.relationship_status&&(t.Married="Y"));const o=function(e){if(null!=e){let t="",o="";for(let i=0;i<e.length;i++){const r=e[i];if(null!=r.type){const e=r.type;if("Graduate School"===e)return"Graduate";"College"===e?t="1":"High School"===e&&(o="1")}}if("1"===t)return"College";if("1"===o)return"School"}}(e.education);null!=o&&(t.Education=o);const i=null!=e.work?e.work.length:0;if(t.Employed=i>0?"Y":"N",null!=e.email&&(t.Email=e.email),null!=e.birthday){const o=e.birthday.split("/");t.DOB=$(o[2]+o[0]+o[1])}return t},je=(e,t)=>{let{logger:o}=t;const i={};if(null!=e.displayName&&(i.Name=e.displayName),null!=e.id&&(i.GPID=e.id+""),null!=e.gender&&("male"===e.gender?i.Gender="M":"female"===e.gender?i.Gender="F":"other"===e.gender&&(i.Gender="O")),null!=e.image&&!1===e.image.isDefault&&(i.Photo=e.image.url.split("?sz")[0]),null!=e.emails)for(let t=0;t<e.emails.length;t++){const o=e.emails[t];"account"===o.type&&(i.Email=o.value)}if(null!=e.organizations){i.Employed="N";for(let t=0;t<e.organizations.length;t++){"work"===e.organizations[t].type&&(i.Employed="Y")}}if(null!=e.birthday){const t=e.birthday.split("-");i.DOB=$(t[0]+t[1]+t[2])}return null!=e.relationshipStatus&&(i.Married="N","married"===e.relationshipStatus&&(i.Married="Y")),o.debug("gplus usr profile "+JSON.stringify(i)),i},De=async(e,t)=>{if(K._isLocalStorageSupported()){if(null==J.globalProfileMap&&(J.globalProfileMap=await K.readFromLSorCookie(P),null==J.globalProfileMap&&(J.globalProfileMap={})),null!=e._custom){const t=e._custom;for(const o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);delete e._custom}for(const o in e)if(e.hasOwnProperty(o)){if(J.globalProfileMap.hasOwnProperty(o)&&!t)continue;J.globalProfileMap[o]=e[o]}null!=J.globalProfileMap._custom&&delete J.globalProfileMap._custom,await K.saveToLSorCookie(P,J.globalProfileMap)}};var Ee=t("fireRequest"),_e=t("dropRequestDueToOptOut"),Ne=t("addUseIPToRequest"),Te=t("addARPToRequest");class Me{static async processResponse(e){e.arp&&await(async e=>{if(null!=e.skipResARP&&e.skipResARP)return console.debug("Update ARP Request rejected",e),null;const t=!0===e.isOUL;if(K._isLocalStorageSupported())try{let o=await K.readFromLSorCookie(C);if(null==o||t){o={};for(const t in e)e.hasOwnProperty(t)&&(-1===e[t]?delete o[t]:o[t]=e[t]);await K.saveToLSorCookie(C,o)}}catch(e){console.error("Unable to parse ARP JSON: "+e)}})(e.arp),e.meta&&await fe.s(e.meta.g,e.meta.sid,e.meta.rf,e.meta.rn)}static async fireRequest(e,t,i){await o(this,Ee)[Ee](e,1,t,i)}}Me.logger=void 0,Me.device=void 0,Me.mode=void 0,Me.api=void 0,Object.defineProperty(Me,Ee,{value:async function(e,t,i,r){if(o(this,_e)[_e]())this.logger.debug("req dropped due to optout cookie: "+this.device.gcookie);else if(q(this.device.gcookie)||(J.blockRequest=!0),!q(this.device.gcookie)&&J.globalCache.RESP_N<J.globalCache.REQ_N-1&&t<200)setTimeout((async()=>{this.logger.debug("retrying fire request for url: ".concat(e,", tries: ").concat(t)),await o(this,Ee)[Ee](e,t+1,i,r)}),50);else{if(r?he.isOULInProgress=!0:(q(this.device.gcookie)&&(e=G(e,"gc",this.device.gcookie)),e=await o(this,Te)[Te](e,i)),e=G(e,"tries",t),e=await o(this,Ne)[Ne](e),-1!==(e=G(e,"r",(new Date).getTime())).indexOf("chrome-extension:")&&(e=e.replace("chrome-extension:","https:")),"WEB"===n.mode){var a,s;if((null===(a=window.clevertap)||void 0===a?void 0:a.hasOwnProperty("plugin"))||(null===(s=window.wizrocket)||void 0===s?void 0:s.hasOwnProperty("plugin"))){const t=window.clevertap.plugin||window.wizrocket.plugin;e=G(e,"ct_pl",t)}for(var c=document.getElementsByClassName("ct-jp-cb");c[0]&&c[0].parentNode;)c[0].parentNode.removeChild(c[0]);const t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src",e),t.setAttribute("class","ct-jp-cb"),t.setAttribute("rel","nofollow"),t.async=!0,document.getElementsByTagName("head")[0].appendChild(t)}else fetch(e).then((e=>e.json())).then(this.processResponse);this.logger.debug("req snt -> url: "+e)}}}),Object.defineProperty(Me,_e,{value:function(){return!J.isOptInRequest&&q(this.device.gcookie)&&N(this.device.gcookie)?":OO"===this.device.gcookie.slice(-3):(J.isOptInRequest=!1,!1)}}),Object.defineProperty(Me,Ne,{value:async function(e){var t=await K.getMetaProp(L);return"boolean"!=typeof t&&(t=!1),G(e,L,t?"true":"false")}}),Object.defineProperty(Me,Te,{value:async function(e,t){if(!0===t){const t={skipResARP:!0};return G(e,"arp",te(JSON.stringify(t),this.logger))}const o=await K.readFromLSorCookie(C);return null!=o?G(e,"arp",te(JSON.stringify(o),this.logger)):e}});let Ie=0,Ue=0;var qe=t("logger"),Fe=t("account"),Be=t("device"),Ge=t("session"),We=t("isPersonalisationActive"),Ke=t("clearCookie"),Je=t("addToLocalEventMap");class xe{constructor(e){let{logger:t,account:i,device:r,session:a,isPersonalisationActive:s}=e;Object.defineProperty(this,Je,{value:He}),Object.defineProperty(this,qe,{writable:!0,value:void 0}),Object.defineProperty(this,Fe,{writable:!0,value:void 0}),Object.defineProperty(this,Be,{writable:!0,value:void 0}),Object.defineProperty(this,Ge,{writable:!0,value:void 0}),Object.defineProperty(this,We,{writable:!0,value:void 0}),Object.defineProperty(this,Ke,{writable:!0,value:!1}),this.processingBackup=!1,o(this,qe)[qe]=t,o(this,Fe)[Fe]=i,o(this,Be)[Be]=r,o(this,Ge)[Ge]=a,o(this,We)[We]=s,Me.logger=t,Me.device=r}processBackupEvents(){const e=K.readFromLSorCookie(R);if(null!=e){this.processingBackup=!0;for(const t in e)if(e.hasOwnProperty(t)){const i=e[t];void 0===i.fired&&(o(this,qe)[qe].debug("Processing backup event : "+i.q),void 0!==i.q&&Me.fireRequest(i.q),i.fired=!0)}K.saveToLSorCookie(R,e),this.processingBackup=!1}}async addSystemDataToObject(e,t){void 0===t&&(e=F(e,o(this,qe)[qe])),I(o(this,qe)[qe].wzrkError)||(e.wzrk_error=o(this,qe)[qe].wzrkError,o(this,qe)[qe].wzrkError={}),e.id=o(this,Fe)[Fe].id,q(o(this,Be)[Be].gcookie)&&(e.g=o(this,Be)[Be].gcookie);const i=await o(this,Ge)[Ge].getSessionCookieObject();return e.s=i.s,e.pg=void 0===i.p?1:i.p,"object"==typeof sessionStorage&&sessionStorage.hasOwnProperty("WZRK_D")&&(e.debug=!0),e}async addSystemDataToProfileObject(e,t){var i;I(o(this,qe)[qe].wzrkError)||(e.wzrk_error=o(this,qe)[qe].wzrkError,o(this,qe)[qe].wzrkError={}),e.id=o(this,Fe)[Fe].id,q(o(this,Be)[Be].gcookie)&&(e.g=o(this,Be)[Be].gcookie);const r=await o(this,Ge)[Ge].getSessionCookieObject();return e.s=r.s,e.pg=void 0===r.p?1:r.p,(null===(i=sessionStorage)||void 0===i?void 0:i.hasOwnProperty("WZRK_D"))&&(e.debug=!0),e}async addFlags(e){if(o(this,Ke)[Ke]=await K.getAndClearMetaProp(v),void 0!==o(this,Ke)[Ke]&&o(this,Ke)[Ke]&&(e.rc=!0,o(this,qe)[qe].debug("reset cookie sent in request and cleared from meta for future requests.")),o(this,We)[We]()){const t=await K.getMetaProp("lsTime"),o=await K.getMetaProp("exTs");if(void 0===t||void 0===o)return void(e.dsync=!0);t+o<z()&&(e.dsync=!0)}}async saveAndFireRequest(e,t,i){const r=z(),a=(e=G(e,"rn",++J.globalCache.REQ_N))+"&i="+r+"&sn="+Ie;t&&(void 0===o(this,Ke)[Ke]||!o(this,Ke)[Ke])||he.isOULInProgress?o(this,qe)[qe].debug("Not fired due to override - ".concat(J.blockRequest," or clearCookie - ").concat(o(this,Ke)[Ke]," or OUL request in progress - ").concat(he.isOULInProgress)):(r===Ue?Ie++:(Ue=r,Ie=0),he.oulReqN=J.globalCache.REQ_N,await Me.fireRequest(a,!1,i))}async unregisterTokenForGuid(e){const t=await K.readFromLSorCookie("WZRK_PSD");if(t){const t={type:"data"};q(e)&&(t.g=e),t.action="unregister",t.id=o(this,Fe)[Fe].id;const i=await o(this,Ge)[Ge].getSessionCookieObject();t.s=i.s;const r=te(JSON.stringify(t),o(this,qe)[qe]);let a=o(this,Fe)[Fe].dataPostURL;a=G(a,"type","data"),a=G(a,"d",r),await Me.fireRequest(a,!0),await K.saveToLSorCookie(E,!1)}await this.registerToken(t)}async registerToken(e){if(!e)return;e=await this.addSystemDataToObject(e,!0),e=JSON.stringify(e);let t=o(this,Fe)[Fe].dataPostURL;t=G(t,"type","data"),t=G(t,"d",te(e,o(this,qe)[qe])),await Me.fireRequest(t),K.addData("localStorage","WZRK_WPR","ok")}async processEvent(e){await o(this,Je)[Je](e.evtName),e=this.addSystemDataToObject(e,void 0),this.addFlags(e),e[k]=Re();const t=te(JSON.stringify(e),o(this,qe)[qe]);let i=o(this,Fe)[Fe].dataPostURL;i=G(i,"type",j),i=G(i,"d",t),await this.saveAndFireRequest(i,J.blockRequest)}}var He=async function(e){if(K._isLocalStorageSupported()){void 0===J.globalEventsMap&&(J.globalEventsMap=await K.readFromLSorCookie(S),void 0===J.globalEventsMap&&(J.globalEventsMap={}));const t=z();let o=J.globalEventsMap[e];void 0!==o?(o[2]=t,o[0]++):(o=[],o.push(1),o.push(t),o.push(t)),J.globalEventsMap[e]=o,await K.saveToLSorCookie(S,J.globalEventsMap)}};let ze;const Ze=e=>{if(T(e)){for(var t in e)if(e.hasOwnProperty(t)){if(T(e[t])||Array.isArray(e[t]))return!1;M(e[t])&&(e[t]=Z(e[t]))}return!0}return!1},$e=async(e,t)=>{if(T(e)){for(var o in e)if(e.hasOwnProperty(o))if("Items"===o){if(!Array.isArray(e[o]))return!1;for(var i in e[o].length>50&&t.reportError(522,"Charged Items exceed 50 limit. Actual count: "+e[o].length),e[o])if(e[o].hasOwnProperty(i)&&(!T(e[o][i])||!Ze(e[o][i])))return!1}else{if(T(e[o])||Array.isArray(e[o]))return!1;M(e[o])&&(e[o]=Z(e[o]))}if(N(e[w])||(r=e[w],/^-?[\d.]+(?:e-?\d+)?$/.test(r)&&"number"==typeof r)){const o=e[w]+"";if(void 0===ze&&(ze=await K.readFromLSorCookie(b)),void 0!==ze&&ze.trim()===o.trim())return t.error("Duplicate charged Id - Dropped"+e),!1;ze=o,await K.saveToLSorCookie(b,o)}return!0}var r;return!1};var Ye=t("logger"),Ve=t("oldValues"),Qe=t("request"),Xe=t("isPersonalisationActive"),et=t("processEventArray");class tt extends Array{constructor(e,t){let{logger:i,request:r,isPersonalisationActive:a}=e;super(),Object.defineProperty(this,et,{value:ot}),Object.defineProperty(this,Ye,{writable:!0,value:void 0}),Object.defineProperty(this,Ve,{writable:!0,value:void 0}),Object.defineProperty(this,Qe,{writable:!0,value:void 0}),Object.defineProperty(this,Xe,{writable:!0,value:void 0}),o(this,Ye)[Ye]=i,o(this,Ve)[Ve]=t,o(this,Qe)[Qe]=r,o(this,Xe)[Xe]=a}async push(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return await o(this,et)[et](t),0}_processOldValues(){o(this,Ve)[Ve]&&o(this,et)[et](o(this,Ve)[Ve]),o(this,Ve)[Ve]=null}getDetails(e){if(!o(this,Xe)[Xe]())return;if(void 0===J.globalEventsMap&&(J.globalEventsMap=K.readFromLSorCookie(S)),void 0===J.globalEventsMap)return;const t=J.globalEventsMap[e],i={};return void 0!==t?(i.firstTime=new Date(1e3*t[1]),i.lastTime=new Date(1e3*t[2]),i.count=t[0],i):void 0}}var ot=async function(e){if(Array.isArray(e))for(;e.length>0;){var t=e.shift();if(!N(t)){o(this,Ye)[Ye].error(be);continue}if(t.length>1024&&(t=t.substring(0,1024),o(this,Ye)[Ye].reportError(510,t+"... length exceeded 1024 chars. Trimmed.")),_.includes(t)){o(this,Ye)[Ye].reportError(513,t+" is a restricted system event. It cannot be used as an event name.");continue}const i={type:"event"};if(i.evtName=B(t,g),0!==e.length){const r=e.shift();if(T(r)){if("Charged"===t){if(!await $e(r,o(this,Ye)[Ye])){o(this,Ye)[Ye].reportError(511,"Charged event structure invalid. Not sent.");continue}}else if(!Ze(r)){o(this,Ye)[Ye].reportError(512,t+" event structure invalid. Not sent.");continue}i.evtData=r}else e.unshift(r)}await o(this,Qe)[Qe].processEvent(i)}},it=t("request"),rt=t("logger"),at=t("account"),st=t("session"),nt=t("oldValues"),ct=t("device"),lt=t("processOUL"),ht=t("handleCookieFromCache"),dt=t("deleteUser"),ut=t("processLoginArray");class gt extends Array{constructor(e,t){let{request:i,account:r,session:a,logger:s,device:n}=e;super(),Object.defineProperty(this,ut,{value:wt}),Object.defineProperty(this,dt,{value:vt}),Object.defineProperty(this,ht,{value:ft}),Object.defineProperty(this,lt,{value:pt}),Object.defineProperty(this,it,{writable:!0,value:void 0}),Object.defineProperty(this,rt,{writable:!0,value:void 0}),Object.defineProperty(this,at,{writable:!0,value:void 0}),Object.defineProperty(this,st,{writable:!0,value:void 0}),Object.defineProperty(this,nt,{writable:!0,value:void 0}),Object.defineProperty(this,ct,{writable:!0,value:void 0}),o(this,it)[it]=i,o(this,at)[at]=r,o(this,st)[st]=a,o(this,rt)[rt]=s,o(this,nt)[nt]=t,o(this,ct)[ct]=n}async clear(){o(this,rt)[rt].debug("clear called. Reset flag has been set."),await o(this,dt)[dt](),await K.setMetaProp(v,!0)}async push(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return await o(this,ut)[ut](t),0}_processOldValues(){o(this,nt)[nt]&&o(this,ut)[ut](o(this,nt)[nt]),o(this,nt)[nt]=null}}var pt=async function(e){let t=!0;await K.saveToLSorCookie(E,t);const i=async e=>{let i=await K.readFromLSorCookie(m);const r=await K.readFromLSorCookie(y);let a;if(null==i)i={},a=e;else{a=i.id;let s=!1,n=!1;if(null==a&&(a=e[0],s=!0),null==J.LRU_CACHE&&K._isLocalStorageSupported()&&(J.LRU_CACHE=new se(100)),s)null!=r&&(J.LRU_CACHE.set(a,r),J.blockRequest=!1);else for(const t in e)if(e.hasOwnProperty(t)){const o=e[t];if(J.LRU_CACHE.cache[o]){a=o,n=!0;break}}if(n){a!==J.LRU_CACHE.getLastKey()?await o(this,ht)[ht]():(t=!1,await K.saveToLSorCookie(E,t));const e=J.LRU_CACHE.get(a);J.LRU_CACHE.set(a,e),await K.saveToLSorCookie(y,e),o(this,ct)[ct].gcookie=e;const i=J.LRU_CACHE.getSecondLastKey();if(await K.readFromLSorCookie(E)&&-1!==i){const e=J.LRU_CACHE.cache[i];await o(this,it)[it].unregisterTokenForGuid(e)}}else s?null!=r&&(o(this,ct)[ct].gcookie=r,await K.saveToLSorCookie(y,r),t=!1):this.clear(),await K.saveToLSorCookie(E,!1),a=e[0]}i.id=a,await K.saveToLSorCookie(m,i)};if(Array.isArray(e)&&e.length>0)for(const r in e)if(e.hasOwnProperty(r)){const a=e[r];let s,n={};if(null!=a.Site){if(s=a.Site,I(s)||!Le(s,{logger:o(this,rt)[rt]}))return}else if(null!=a.Facebook){const e=a.Facebook;I(e)||e.error||(s=Ae(e))}else if(null!=a["Google Plus"]){const e=a["Google Plus"];I(e)&&!e.error&&(s=je(e,{logger:o(this,rt)[rt]}))}if(null!=s&&!I(s)){n.type="profile",null==s.tz&&(s.tz=(new Date).toString().match(/([A-Z]+[\+-][0-9]+)/)[1]),n.profile=s;const e=[];K._isLocalStorageSupported()&&(s.Identity&&e.push(s.Identity),s.Email&&e.push(s.Email),s.GPID&&e.push("GP:"+s.GPID),s.FBID&&e.push("FB:"+s.FBID),e.length>0&&await i(e)),await De(s,!0),n=await o(this,it)[it].addSystemDataToObject(n,void 0),o(this,it)[it].addFlags(n),t&&(n.isOUL=!0);const r=te(JSON.stringify(n),o(this,rt)[rt]);let a=o(this,at)[at].dataPostURL;a=G(a,"type",j),a=G(a,"d",r),await o(this,it)[it].saveAndFireRequest(a,J.blockRequest,t)}}},ft=async function(){J.blockRequest=!1,console.debug("Block request is false"),K._isLocalStorageSupported()&&[P,S,O,C,k,b].forEach((async e=>{await K.deleteData("localStorage",e)})),await K.deleteData("cookie",k,W()),await K.deleteData("cookie",o(this,st)[st].cookieName,J.broadDomain),await K.deleteData("cookie",C,J.broadDomain),await o(this,st)[st].setSessionCookieObject("")},vt=async function(){J.blockRequest=!0,o(this,rt)[rt].debug("Block request is true"),J.globalCache={gcookie:null,REQ_N:0,RESP_N:0},K._isLocalStorageSupported()&&[y,m,P,S,O,C,k,b].forEach((async e=>{await K.deleteData("localStorage",e)})),await K.retrieveData("cookie",y,J.broadDomain),await K.retrieveData("cookie",k,W()),await K.retrieveData("cookie",m,W()),await K.retrieveData("cookie",o(this,st)[st].cookieName,J.broadDomain),await K.retrieveData("cookie",C,J.broadDomain),o(this,ct)[ct].gcookie=null,await o(this,st)[st].setSessionCookieObject("")},wt=async function(e){if(Array.isArray(e)&&e.length>0){const t=e.pop();if(null!=t&&T(t)&&(null!=t.Site&&Object.keys(t.Site).length>0||null!=t.Facebook&&Object.keys(t.Facebook).length>0||null!=t["Google Plus"]&&Object.keys(t["Google Plus"]).length>0)){await K.setInstantDeleteFlagInK();try{await o(this,lt)[lt]([t])}catch(e){o(this,rt)[rt].debug(e)}}else o(this,rt)[rt].error("Profile object is in incorrect format")}};const bt=1,yt=2,mt=3;var kt=t("logLevel"),St=t("log"),Ot=t("isLegacyDebug");class Pt{constructor(e){Object.defineProperty(this,Ot,{get:Rt,set:void 0}),Object.defineProperty(this,St,{value:Ct}),Object.defineProperty(this,kt,{writable:!0,value:void 0}),this.wzrkError={},o(this,kt)[kt]=null==e?e:yt,this.wzrkError={}}get logLevel(){return o(this,kt)[kt]}set logLevel(e){o(this,kt)[kt]=e}error(e){o(this,kt)[kt]>=bt&&o(this,St)[St]("error",e)}info(e){o(this,kt)[kt]>=yt&&o(this,St)[St]("log",e)}debug(e){(o(this,kt)[kt]>=mt||o(this,Ot)[Ot])&&o(this,St)[St]("debug",e)}reportError(e,t){this.wzrkError.c=e,this.wzrkError.d=t,this.error("".concat(we," ").concat(e,": ").concat(t))}}var Ct=function(e,t){try{const o=(new Date).getTime();console[e]("CleverTap [".concat(o,"]: ").concat(t))}catch(e){}},Rt=function(){return"undefined"!=typeof sessionStorage&&""===sessionStorage.WZRK_D},Lt=t("account"),At=t("logger"),jt=t("device"),Dt=t("session"),Et=t("request");return class{constructor(e){let{browser:t,accountId:i,region:r}=e;Object.defineProperty(this,Lt,{writable:!0,value:void 0}),Object.defineProperty(this,At,{writable:!0,value:void 0}),Object.defineProperty(this,jt,{writable:!0,value:void 0}),Object.defineProperty(this,Dt,{writable:!0,value:void 0}),Object.defineProperty(this,Et,{writable:!0,value:void 0}),n.browser=t,n.mode="SHOPIFY",o(this,At)[At]=new Pt(yt),o(this,Lt)[Lt]=new u({id:i},r),o(this,jt)[jt]=new H({logger:o(this,At)[At]}),o(this,Dt)[Dt]=new ee({logger:o(this,At)[At],isPersonalisationActive:()=>!1}),o(this,Et)[Et]=new xe({logger:o(this,At)[At],account:o(this,Lt)[Lt],device:o(this,jt)[jt],session:o(this,Dt)[Dt],isPersonalisationActive:()=>!1}),this.event=new tt({logger:o(this,At)[At],request:o(this,Et)[Et],isPersonalisationActive:()=>!1}),this.onUserLogin=new gt({request:o(this,Et)[Et],account:o(this,Lt)[Lt],session:o(this,Dt)[Dt],logger:o(this,At)[At],device:o(this,jt)[jt]}),fe.setPrivateProperties({logger:o(this,At)[At],request:o(this,Et)[Et],session:o(this,Dt)[Dt],device:o(this,jt)[jt]})}async init(){if(o(this,jt)[jt].gcookie=await o(this,jt)[jt].getGuid(),await K.removeCookieAsync("WZRK_P",W()),!o(this,Lt)[Lt].id)return!1;o(this,Dt)[Dt].cookieName="WZRK_S_"+o(this,Lt)[Lt].id,await this.pageChanged()}async pageChanged(){const e=n.browser.document.location.href,t=await o(this,Dt)[Dt].getSessionCookieObject();let i=void 0===t.p?0:t.p;t.p=++i,await o(this,Dt)[Dt].setSessionCookieObject(t);let r={};r=await o(this,Et)[Et].addSystemDataToObject(r,void 0),r.cpg=e;let a=o(this,Lt)[Lt].dataPostURL,{protocol:s}=n.browser.document.location;s=s.replace(":",""),r.af={protocol:s},a=G(a,"type","page"),a=G(a,"d",te(JSON.stringify(r),o(this,At)[At])),await o(this,Et)[Et].addFlags(r),await o(this,Et)[Et].saveAndFireRequest(a,J.blockRequest)}}}();
